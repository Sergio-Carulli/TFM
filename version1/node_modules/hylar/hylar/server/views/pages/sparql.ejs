<!DOCTYPE html>
<html lang="en">
<head>
    <% include ../partials/head.ejs %>
</head>
<body>
<header>
    <% include ../partials/menu.ejs %>
</header>
<section class="hero is-dark">
    <div class="hero-body">
        <p class="title">
            SPARQL Endpoint
        </p>
    </div>
</section>

<section id="sparql-errors-section" style="display:none; font-family: monospace" class="section">
    <div class="container">
        <article class="message is-danger">
            <div class="message-header">
                ðŸ˜° QueryError
            </div>
            <div class="message-body" id="sparql-errors"></div>
        </article>
    </div>
</section>

<section id="sparql-success-section" style="display:none;" class="section">
    <div class="container">
        <article class="message is-success">
            <div class="message-header">
                âœ¨ Success
            </div>
            <div class="message-body" id="sparql-success"></div>
        </article>
    </div>
</section>

<section class="section">
    <div class="container">
        <textarea id="query" name="query"><%- sparqlQuery %></textarea>
        <div class="columns">
            <div class="column">
                <input onclick="sparql(this, '<%- contextPath %>')" style="margin-top: 10px" class="button is-info" type="submit" value="Submit query">
            </div>
            <div class="column">
                <div class="powered-by">
                    Powered by
                    <a class="rdfstore" href="https://www.npmjs.com/package/rdfstore"><img width="14px" height="14px" src="<%- contextPath %>/img/rdf.png"> rdfstore.js</a> and
                    <a class="yasqe" href="https://yasqe.yasgui.org/"><img width="14px" height="14px" src="<%- contextPath %>/img/yasqe.png"> YASQE</a>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="sparql-results-section" style="display:none;" class="section">
    <div class="container">
        <h1 class="subtitle">Results</h1>
        <div class="table-container">
            <table id="sparql-results-table" class="table results-table is-bordered table-responsive is-fullwidth"></table>
        </div>
    </div>
</section>

<div class="container">
    <div id="sparql-graph-result" class="container graph-result" style="display:none;">
    </div>
</div>

<!--
<section class="section">
    <div class="container">
        <h1 class="subtitle">Query history</h1>
        <table class="table is-warning is-bordered table-responsive is-fullwidth">
            <% for (var i = (history.length-1); i > -1; i--) { %>
                <% if(history[i].noError) { %>
                <tr class="message is-success">
                <% } else { %>
                <tr class="message is-danger">
                <% } %>
                    <td onclick="putSparql(this)"><%= history[i].query %></td>
                </tr>
            <% } %>
        </table>
    </div>
</section>
-->

<script>
    let sparqlQuery = YASQE.fromTextArea(document.getElementById('query'))
</script>

</body>
</html>